const game = document.getElementById("canvas");
game.setAttribute("width", getComputedStyle(game)["width"]);
game.setAttribute("height", getComputedStyle(game)["height"]);
const movement = document.getElementById("movement");
const glovePic = document.getElementById("glove");
const glovePunch = document.getElementById("gloveExtend");
const ctx = game.getContext("2d");
let isGloved = false;
let playerHealth = 100;
let spriteDirection = "left";
let drPepperDirection = "up";
class MugMen {
  constructor(x, y, color, width, height, type) {
    (this.x = x),
      (this.y = y),
      (this.color = color),
      (this.width = width),
      (this.height = height),
      (this.type = type),
      (this.alive = true),
      (this.render = function () {
        ctx.fillStyle = this.color;
        ctx.fillRect(this.x, this.y, this.width, this.height);
      });
  }
}
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//-------------------------------------------------------------------------------------------------------------------------------------------------------------------
const drawGlove = () => {
  ctx.drawImage(glovePic, 50, 50);
};
const drawPunch = () => {
  ctx.drawImage(glovePunch, player.x + player.width, player.y);
};
let player = new MugMen(15, 15, "blue", 15, 15, "player");
let mug = new MugMen(600, 300, "brown", 30, 65, "mug");
let glove = new MugMen(50, 50, "transparent", 20, 20, "glove");
let sprite = new MugMen(100, 200, "limegreen", 30, 65, "sprite");
let drPepper = new MugMen(100, 100, "red", 30, 65, "drPepper");
let borderLeft = new MugMen(0, 0, "red", 5, 900, "border");
let borderRight = new MugMen(795, 0, "red", 5, 900, "border");
let borderUp = new MugMen(0, 0, "red", 900, 5, "border");
let borderDown = new MugMen(0, 395, "red", 900, 5, "border");
document.addEventListener("DOMContentLoaded", function () {
  document.addEventListener("keydown", movementHandler);
  setInterval(gameLoop, 60);
  drawGlove();
});
// the game loop function determines when and how all the objects are rendered
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//-------------------------------------------------------------------------------------------------------------------------------------------------------------------
const gameLoop = () => {
  ctx.clearRect(0, 0, game.width, game.height);
  movement.textContent = player.x + ", " + player.y;
  document.getElementById("health").textContent = playerHealth;
  if (player.alive) {
    player.render();
    borderDownHit();
    borderLeftHit();
    borderUpHit();
    borderRightHit();
  }
  if (sprite.alive) {
    sprite.render();
    spritePath();
    detectHit(sprite);
  }
  if (drPepper.alive) {
    drPepper.render();
    drPepperPath();
    detectHit(drPepper);
  }
  if (mug.alive) {
    detectMugHit();
  }
  if (glove.alive) {
    detectGloveHit();
  }
  if (mug.alive) {
    mug.render();
  }
  if (glove.alive) {
    drawGlove();
    glove.render();
  }
  if (playerHealth === 0) {
    player.alive = false;
  }
  if (borderLeft.alive) {
    borderLeft.render();
  }
  if (borderRight.alive) {
    borderRight.render();
  }
  if (borderUp.alive) {
    borderUp.render();
  }
  if (borderDown.alive) {
    borderDown.render();
  }
};
//this is my player movement function
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//-------------------------------------------------------------------------------------------------------------------------------------------------------------------
const movementHandler = (e) => {
  if (player.alive === true) {
    switch (e.keyCode) {
      case 87:
        player.y -= 5;
        break;
      case 65:
        player.x -= 5;
        break;
      case 83:
        player.y += 5;
        break;
      case 68:
        player.x += 5;
        break;
    }
  } else {
    return false;
  }
};
//these are the functions that relate the the enemy objects
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//-------------------------------------------------------------------------------------------------------------------------------------------------------------------
const spritePath = () => {
  if (spriteDirection === "right") {
    sprite.x += 5;
  } else if (spriteDirection === "left") {
    sprite.x -= 5;
  }
};
const drPepperPath = () => {
  if (drPepperDirection === "down") {
    drPepper.y += 5;
  } else if (drPepperDirection === "up") {
    drPepper.y -= 5;
  }
};
const detectHit = (thing) => {
  if (
    player.x < thing.x + thing.width &&
    player.x + player.width > thing.x &&
    player.y < thing.y + thing.height &&
    player.y + player.height > thing.y &&
    isGloved &&
    thing.type === "sprite"
  ) {
    drawPunch();
    thing.alive = false;
    document.getElementById("status").textContent = "You punch a sprite!";
  } else if (
    player.x < thing.x + thing.width &&
    player.x + player.width > thing.x &&
    player.y < thing.y + thing.height &&
    player.y + player.height > thing.y &&
    isGloved &&
    thing.type === "drPepper"
  ) {
    drawPunch();
    thing.alive = false;
    document.getElementById("status").textContent = "You punch a dr.Pepper!";
  } else if (
    player.x < thing.x + thing.width &&
    player.x + player.width > thing.x &&
    player.y < thing.y + thing.height &&
    player.y + player.height > thing.y &&
    !isGloved &&
    thing.type === "sprite" &&
    spriteDirection === "left"
  ) {
    player.x -= 50;
    player.y -= 50;
    playerHealth -= 10;
    document.getElementById("status").textContent =
      "You got punch by a sprite!";
  } else if (
    player.x < thing.x + thing.width &&
    player.x + player.width > thing.x &&
    player.y < thing.y + thing.height &&
    player.y + player.height > thing.y &&
    !isGloved &&
    thing.type === "sprite" &&
    spriteDirection === "right"
  ) {
    player.x += 50;
    player.y -= 50;
    playerHealth -= 10;
    document.getElementById("status").textContent =
      "You got punch by a sprite!";
  } else if (
    player.x < thing.x + thing.width &&
    player.x + player.width > thing.x &&
    player.y < thing.y + thing.height &&
    player.y + player.height > thing.y &&
    !isGloved &&
    thing.type === "drPepper" &&
    drPepperDirection === "up"
  ) {
    player.x -= 50;
    player.y -= 50;
    playerHealth -= 10;
    document.getElementById("status").textContent =
      "You got punch by a dr.Pepper!";
  } else if (
    player.x < thing.x + thing.width &&
    player.x + player.width > thing.x &&
    player.y < thing.y + thing.height &&
    player.y + player.height > thing.y &&
    !isGloved &&
    thing.type === "drPepper" &&
    drPepperDirection === "down"
  ) {
    player.x -= 50;
    player.y += 50;
    playerHealth -= 10;
    document.getElementById("status").textContent =
      "You got punch by a dr.Pepper!";
  }
  if (playerHealth === 0) {
    player.alive = false;
    document.getElementById("status").textContent = "You die by a soda punch";
  }
};

//this is the functions that deal with mug and the glove
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------//-------------------------------------------------------------------------------------------------------------------------------------------------------------------
const detectGloveHit = () => {
  if (
    player.x < glove.x + glove.width &&
    player.x + player.width > glove.x &&
    player.y < glove.y + glove.height &&
    player.y + player.height > glove.y
  ) {
    glove.alive = false;
    document.getElementById("status").textContent = "You have a glove!";
    isGloved = true;
  }
};
const detectMugHit = () => {
  if (
    player.x < mug.x + mug.width &&
    player.x + player.width > mug.x &&
    player.y < mug.y + mug.height &&
    player.y + player.height > mug.y
  ) {
    mug.alive = false;
    document.getElementById("status").textContent = "You save a mug!";
  }
};
//these are my border collision functions
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
const borderLeftHit = () => {
  if (sprite.x <= 0 && spriteDirection === "left") {
    spriteDirection = "right";
  }
  if (player.x <= 0) {
    player.x += 30;
    document.getElementById("status").textContent =
      "The world punch you for trying to abandon mug";
    playerHealth -= 10;
  }
};
const borderRightHit = () => {
  if (sprite.x + sprite.width >= 830 && spriteDirection === "right") {
    spriteDirection = "left";
  }
  if (player.x + player.width >= 800) {
    player.x -= 30;
    document.getElementById("status").textContent =
      "The world punch you for trying to abandon mug";
    playerHealth -= 10;
  }
};
const borderUpHit = () => {
  if (drPepper.y <= 0 && drPepperDirection === "up") {
    drPepperDirection = "down";
  }
  if (player.y <= 0) {
    player.y += 30;
    document.getElementById("status").textContent =
      "The world punch you for trying to abandon mug";
    playerHealth -= 10;
  }
};
const borderDownHit = () => {
  if (drPepper.y + drPepper.height >= 360 && drPepperDirection === "down") {
    drPepperDirection = "up";
  }
  if (player.y + player.height >= 395) {
    player.y -= 30;
    document.getElementById("status").textContent =
      "The world punch you for trying to abandon mug";
    playerHealth -= 10;
  }
};
